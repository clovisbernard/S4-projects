pipeline {
    agent any
  stages {
    stage('Build auth') {
      when {
        expression {
              env.ENVIRONMENT == 'DEV' }
      }
      steps {
        script {
          // Log in to Docker Hub
          sh '''
                        cd auth
                        docker build -t devopseasylearning/s4-pipeline-auth:${BUILD_NUMBER} .
                        cd -
                    '''
        }
      }
    }
  }
}
